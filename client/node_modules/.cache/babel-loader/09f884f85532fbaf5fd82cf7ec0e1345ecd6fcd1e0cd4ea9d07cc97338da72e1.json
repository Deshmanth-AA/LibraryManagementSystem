{"ast":null,"code":"const express = require('express');\nconst router = express.Router();\nconst {\n  protect\n} = require('../middleware/auth');\nconst {\n  checkRole\n} = require('../middleware/roleCheck');\nconst Borrow = require('../models/Borrow');\n\n// Get all borrows (Admin only)\nrouter.get('/all', protect, checkRole(['admin']), async (req, res) => {\n  try {\n    const borrows = await Borrow.find().populate('user', 'name email') // Populate user fields\n    .populate('book', 'title author') // Populate book fields\n    .sort({\n      issueDate: -1\n    }); // Sort by most recent borrow\n\n    res.json(borrows);\n  } catch (error) {\n    console.error('Error fetching all borrows:', error);\n    res.status(500).json({\n      message: 'Error fetching all borrows'\n    });\n  }\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","router","Router","protect","checkRole","Borrow","get","req","res","borrows","find","populate","sort","issueDate","json","error","console","status","message","module","exports"],"sources":["F:/library-management-system/client/src/components/admin/ViewIssuedBooks.js"],"sourcesContent":["const express = require('express');\nconst router = express.Router();\nconst { protect } = require('../middleware/auth');\nconst { checkRole } = require('../middleware/roleCheck');\nconst Borrow = require('../models/Borrow');\n\n// Get all borrows (Admin only)\nrouter.get('/all', protect, checkRole(['admin']), async (req, res) => {\n  try {\n    const borrows = await Borrow.find()\n      .populate('user', 'name email') // Populate user fields\n      .populate('book', 'title author') // Populate book fields\n      .sort({ issueDate: -1 }); // Sort by most recent borrow\n\n    res.json(borrows);\n  } catch (error) {\n    console.error('Error fetching all borrows:', error);\n    res.status(500).json({ message: 'Error fetching all borrows' });\n  }\n});\n\nmodule.exports = router;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAM;EAAEC;AAAQ,CAAC,GAAGH,OAAO,CAAC,oBAAoB,CAAC;AACjD,MAAM;EAAEI;AAAU,CAAC,GAAGJ,OAAO,CAAC,yBAAyB,CAAC;AACxD,MAAMK,MAAM,GAAGL,OAAO,CAAC,kBAAkB,CAAC;;AAE1C;AACAC,MAAM,CAACK,GAAG,CAAC,MAAM,EAAEH,OAAO,EAAEC,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,OAAOG,GAAG,EAAEC,GAAG,KAAK;EACpE,IAAI;IACF,MAAMC,OAAO,GAAG,MAAMJ,MAAM,CAACK,IAAI,CAAC,CAAC,CAChCC,QAAQ,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAAA,CAC/BA,QAAQ,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;IAAA,CACjCC,IAAI,CAAC;MAAEC,SAAS,EAAE,CAAC;IAAE,CAAC,CAAC,CAAC,CAAC;;IAE5BL,GAAG,CAACM,IAAI,CAACL,OAAO,CAAC;EACnB,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACnDP,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC;MAAEI,OAAO,EAAE;IAA6B,CAAC,CAAC;EACjE;AACF,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGnB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}